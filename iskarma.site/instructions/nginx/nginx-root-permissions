# after installation if you change the root directory of nginx configuration you will need to make sure that nginx process has permission to access the new directory.
# first you need to know what user nginx is running as that information can be found in /etc/nginx/nginx.conf (it would generally be www-data or nginx)

# you can check the permission with
sudo -u www-data stat /home/nashady/data/x10premium/public_html
sudo -u nginx stat /home/nashady/data/x10premium/public_html

# if you see stat details then it is accessible if you get a permission denied error then you need to check the current permission for the directory

sudo ls -l /home/nashady/data/x10premium/public_html

# drwxr-xr-x = owner(write/execute/read) - group(execute/read) - others(read)
# this permission can be set using chmod (adding -R applies the rule recursively to sub-folder/files)
sudo chmod -R 755 /home/nashady/data/x10premium/public_html

# if the root directory is owned by user:group nashady:nashady then you will need to add nginx to the group nashady for it to be able to access the directory

sudo usermod -a -G nashady nginx (this will add user nginx to group nashady)

# you might also need to do the same for php8.2-fpm.sock. you can check which user:group is owns it
sudo ls -l /run/php/php8.2-fpm.sock

# it is usually (www-data:www-data). you will need to add nginx to that group as well
sudo usermod -a -G www-data nginx (this will add user nginx to group www-data)

# if you encounter any more problems access nginx error logs and resolve the issue.
sudo nano /var/log/nginx/error.log

# test nginx configuration
sudo nginx -t

# if test passes reload nginx
sudo nginx -s reload
